# Unity MCP 徹底ガイド

このガイドでは、Unity MCP Serverの導入から実際の使い方までを、初めての方でも分かるようにステップバイステップで解説します。

## 📋 事前準備

作業を始める前に、以下のものがパソコンに入っているか確認してください。

1.  **Unity**: ゲームを作るためのソフトです（バージョン2021.3以上推奨）。
2.  **Python (パイソン)**: サーバーを動かすためのプログラム言語です。
    *   [Python公式サイト](https://www.python.org/downloads/)からダウンロードしてインストールしてください。
    *   **重要**: インストール時の画面で **"Add Python to PATH"** というチェックボックスに必ずチェックを入れてください。

---

## 🛠️ 手順 1: Unityへの導入

まず、Unityプロジェクトにこのツールを組み込みます。

1.  Unity Hubを開き、使いたいプロジェクトを開きます（または新規作成します）。
2.  Unityの画面上部にあるメニューから **Window** をクリックし、その中の **Package Manager** を選びます。
3.  出てきたウィンドウの左上にある **+ (プラスマーク)** をクリックします。
4.  **Add package from git URL...** を選びます。
5.  入力欄が出てくるので、以下の文字をコピーして貼り付け、**Add** をクリックします。
    ```
    https://github.com/PrayerEluned/unity-mcp.git?path=/unity-package
    ```
6.  少し待つとインストールが完了し、リストに「MCP for Unity」が表示されます。

---

## 🔌 手順 2: サーバーの準備と起動

AIとUnityがお話しするための「サーバー」を準備します。

1.  このページ（GitHub）の緑色の **Code** ボタンを押し、**Download ZIP** を選んでファイルをダウンロードします。
2.  ダウンロードしたZIPファイルを解凍（展開）します。
3.  解凍したフォルダの中にある **`start_server.bat`** というファイルを探します。
4.  **`start_server.bat`** をダブルクリックして実行します。
5.  黒い画面（ターミナル）が表示されます。
    *   初回は必要なデータのダウンロードが行われるため、数分かかることがあります。
    *   最後に `Starting FastMCP with HTTP transport` と表示されたら準備完了です。
    *   **重要**: この黒い画面は、AIを使っている間は **閉じずに開いたまま** にしてください。

---

## 🤖 手順 3: AIエージェントの設定

もちろん、**Antigravity** でもUnity MCPは利用可能です！
ClaudeやCursorは他の選択肢として紹介していましたが、Antigravityで使う場合は以下の手順で設定してください。

### Antigravity の場合

1.  Antigravityの設定ファイル（`mcp_config.json` など）を開きます。
    *   通常は `C:\Users\USERNAME\.gemini\antigravity\mcp_config.json` にあります。
2.  `mcpServers` の部分に以下を追加してください。

```json
{
  "mcpServers": {
    "UnityMCP": {
      "url": "http://localhost:8080/sse"
    }
  }
}
```

3.  Antigravityを再起動（または設定をリロード）します。

> **💡 接続の確認方法**
> Unityの画面上には「Antigravity」という名前は表示されません（Unityは「サーバー」とだけつながっているため）。
> 接続できたか確認するには、**`start_server.bat` の黒い画面** を見てください。
> Antigravityが接続すると、画面に `GET /sse` や `Connected` といったログが流れます。

### Cursor (カーソル) の場合

1.  Cursorを開き、右上の歯車アイコン（設定）をクリックします。
2.  設定メニューの中から **Features** > **MCP** を探してクリックします。
3.  **+ Add New MCP Server** ボタンをクリックします。
4.  出てきた画面に以下のように入力します。
    *   **Name**: `UnityMCP` （好きな名前でOKです）
    *   **Type**: `SSE` を選択します。
    *   **URL**: `http://localhost:8080/sse`
5.  **Save** または **Add** をクリックして保存します。
6.  緑色の丸が表示されれば接続成功です！

### Claude Desktop をお使いの場合

1.  設定ファイルを開きます。
    *   Windowsの場合: エクスプローラーのアドレスバーに `%APPDATA%\Claude\claude_desktop_config.json` と入力してEnterを押すと開けます（ファイルがない場合はメモ帳などで作成してください）。
2.  ファイルの中身を以下のように書き換えて保存します。

```json
{
  "mcpServers": {
    "UnityMCP": {
      "url": "http://localhost:8080/sse"
    }
  }
}
```

3.  Claude Desktopを再起動します。

---

## 🎮 手順 4: 使ってみよう！

すべての準備が整いました。AIに話しかけてみましょう。

1.  Unityエディタが開いていること、黒い画面（サーバー）が動いていることを確認します。
2.  AIエージェント（Cursorのチャットなど）で、以下のように入力してみてください。

> 「Unityのシーンに、赤いキューブを作ってください」

うまくいけば、Unityの画面上に自動的に赤いキューブが現れるはずです！

### 他にできることの例

*   「現在のシーンにあるオブジェクトをリストアップして」
*   「"Player"という名前のオブジェクトを探して」
*   「コンソールに出ているエラーの内容を教えて」
*   「新しいC#スクリプト "GameManager" を作って」

---

## 困ったときは

*   **「サーバーが見つかりません」と言われる**
    *   黒い画面（`start_server.bat`）が閉じられていませんか？もう一度ダブルクリックして起動してください。
*   **Unityが反応しない**
    *   Unityエディタがバックグラウンドで停止している可能性があります。Unityの画面を一度クリックしてアクティブにしてみてください。
*   **エラーが出る**
    *   黒い画面にエラーメッセージが出ていないか確認してください。

これで解説は終了です。AIとの新しい開発体験をお楽しみください！
